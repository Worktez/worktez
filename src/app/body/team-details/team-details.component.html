<!-- /*********************************************************** 
* Copyright (C) 2022 
* Worktez 
* 
* This program is free software; you can redistribute it and/or 
* modify it under the terms of the MIT License 
* 
* 
* This program is distributed in the hope that it will be useful, 
* but WITHOUT ANY WARRANTY; without even the implied warranty of 
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
* See the MIT License for more details. 
***********************************************************/ -->

<div class="container-fluid m-2 p-2" id="teamDetailsContainer" *ngIf="teamDataReady">
  <div class="card">
    <div class="row mx-3 mt-3 pr-2">
      <div class="col-auto">
      <h1 class="ml-3 mb-0">{{team.TeamName}}</h1>
      <h3 class="ml-3 card-subtitle text-muted mb-0">{{ team.TeamDescription }}</h3>
      <h3 class="ml-3 card-subtitle font-weight-bold">Team Id: {{ team.TeamId }}</h3>
     </div>
      <span class="material-icons mr-2 p-2" type="button" data-toggle="modal"
        data-target="#updateTeam" (click)="updateTeam(team)" title="manage accounts"
        data-bs-toggle="tooltip">edit</span>

      <span class="material-icons mr-2 trash p-2" type="button" (click)="deleteTeam()"
      title="delete Team" data-bs-toggle="tooltip">delete</span>
     <div class="col text-right">
      <span class="material-icons float-right" (click)="close()" style="cursor: pointer;">close</span>
     </div>
    </div>
    <hr>    

    <div class="card-body mx-4">
      <div class="row">
        <div class="col-md-4 part">
          <div class="row px-2">
            <div class="col pt-0">
              <h2>Team Members</h2>
            </div>
            <button class="btn mr-3" (click)="addMember()" data-bs-toggle="tooltip" data-bs-placement="top" data-toggle="modal" data-target="#memberModal" title="add-member">Add Member</button>
          </div>
          <div class="row">
            <div class="col-7">
              <ng-container *ngFor="let item of team.TeamMembers">
                <div class="col mb-3">
                  <app-suggestion-bucket [email]="item"  [showEmail] = "false" (selectedEmail)="selectedAssignee($event)"></app-suggestion-bucket>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
        
        <div class="col-md-8 part teamLabels">
          <div class="row px-2">
            <div class="col pt-0">
              <h2>Team Labels</h2>
            </div>
            <button class="btn float-right mr-4" (click)="createDefaultLabels()">Add Default Label</button>
          </div>
          <div class="row scopeLabels">
            <ng-container *ngFor="let item of team.Scope">
              <div class="col mb-3">
                <app-label-card [scope]="item" [teamName]="team.TeamName"></app-label-card>
              </div>
            </ng-container>
          </div>
        </div>
        </div>
      </div>

    </div>
</div>
<ng-container *ngIf="updateTeamEnabled">
  <app-update-team (teamUpdated)="teamUpdated($event)" [teamToUpdate]="teamToUpdate"></app-update-team>
</ng-container>
<ng-container *ngIf="addMemberEnabled" id="memberModalLabel">
  <app-add-member [teamId]="teamId" [teamName]="team.TeamName" [teamMembers]="team.TeamMembers" [teamManager]="team.TeamManagerEmail" [teamDescription]="teamDescription" [isUpdateTeam]="true" (addedMember)="addedMember($event)"></app-add-member>
</ng-container>